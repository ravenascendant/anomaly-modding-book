<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ImGui - Anomaly Modding Book</title>


        <!-- Custom HTML head -->
        <script defer data-domain="igigog.github.io" src="https://plausible.io/js/script.hash.js"></script><script defer data-domain="igigog.github.io" src="https://plausible.io/js/script.hash.js"></script>
        <script defer src="https://cloud.umami.is/script.js" data-website-id="af269dba-ec2d-471b-a4c9-44023cb64adc"></script>

        <meta name="description" content="Introductory book for S.T.A.L.K.E.R. Anomaly modding">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/custom.css">
        <link rel="stylesheet" href="../../theme/css/tables.css">
        <link rel="stylesheet" href="../../theme/css/mdbook-admonish.css">
        <link rel="stylesheet" href="../../theme/css/whichlang.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anomaly Modding Book</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/Igigog/anomaly-modding-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book/edit/main/src/tutorials/scripting/imgui.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="imgui"><a class="header" href="#imgui">ImGui</a></h1>
<hr />
<h2 id="basics"><a class="header" href="#basics">Basics</a></h2>
<p>Dear ImGui is a bloat-free graphical user interface library for C++.<br />
It outputs optimized vertex buffers that you can render anytime in your 3D-pipeline-enabled application.<br />
It is fast, portable, renderer agnostic, and self-contained (no external dependencies).</p>
<p>This guide explains how to use Anomaly’s ImGui implementation (currently available only with Modded Exes), which can be used in Lua scripts.</p>
<p>By default pressing F11 will show the ImGui overlay (a menu bar at the top of the screen).<br />
The keybind can be changed in the settings.</p>
<p>When the ImGui overlay is shown, the mouse cursor will change and the game will no longer react to any input.</p>
<p>Pressing Esc or F11 will hide it again - you can also transfer the input back to the game without closing the overlay by double clicking anywhere outside of existing ImGui windows.<br />
In this case, pressing F11 will bring the input back to the ImGui overlay.</p>
<p>Some resources to get you started on ImGui:</p>
<ul>
<li><a href="https://pthom.github.io/imgui_manual_online/manual/imgui_manual.html">Interactive ImGui Demo</a></li>
<li><a href="https://github.com/ocornut/imgui/wiki/Debug-Tools">ImGui Debug Tools</a> (accessible in-game from the <code>About</code> menu)</li>
</ul>
<h2 id="differences-between-c-and-lua-imgui-implementations"><a class="header" href="#differences-between-c-and-lua-imgui-implementations">Differences between C++ and Lua ImGui implementations</a></h2>
<p>Not every feature of ImGui has been ported (yet?), for example drawlists or custom images/textures are not supported at the moment.<br />
I didn’t test every single function, it’s possible that there may be some oversights.</p>
<p>The main differences:</p>
<ul>
<li>
<p><code>ImGui.</code> instead of <code>ImGui::</code></p>
</li>
<li>
<p>Some functions return multiple values, so the following C++ code</p>
<pre><code class="language-c++">bool expanded = ImGui::Begin("My Test Window", &amp;my_window_visible, 0)
</code></pre>
<p>turns into</p>
<pre><code class="language-lua">expanded, my_window_visible = ImGui.Begin("My Test Window", my_window_visible, 0)
</code></pre>
</li>
<li>
<p><code>ImGui.Text()</code> and <code>ImGui.TextUnformatted()</code> do the same thing, use <code>string.format()</code> to format strings</p>
</li>
<li>
<p>The <code>InputText</code> functions have their return values swapped</p>
<pre><code class="language-lua">multiline_text, changed = ImGui.InputTextMultiline("##Multiline", multiline_text, 500, vector2():set(500,500))
-- vs. other functions
changed, test_value = ImGui.DragFloat("Test", test_value, 0.01, 0, 10)
</code></pre>
</li>
<li>
<p>Scripted ImGui uses XRay types (<code>vector2, vector, vector4, fcolor</code>)</p>
</li>
</ul>
<p>Check <code>lua_help_imgui.script</code> for a full list of functions and enums.</p>
<h3 id="imgui-window"><a class="header" href="#imgui-window">ImGui Window</a></h3>
<p>Let’s begin with a simple window</p>
<pre><code class="language-lua">my_window_visible = true

function imgui_on_render(name)
	
	if name == "Main" then
	
		if my_window_visible then
		
			expanded, my_window_visible = ImGui.Begin("My Test Window", my_window_visible, 0)
			
			if expanded then
				
				ImGui.Text("This is my test window!")
				
			end
			
			ImGui.End()
		end
	end
end

function on_game_start()
	RegisterScriptCallback("imgui_on_render", imgui_on_render)
end
</code></pre>
<p><img src="assets/images/imgui-window-example.png" alt="ImGui Example Window" /></p>
<p>Pressing the triangle will contract the window - <code>expanded</code> will be false in the example above.<br />
Closing the window will set <code>my_window_visible</code> to false.</p>
<h3 id="when-to-call-imgui-functions"><a class="header" href="#when-to-call-imgui-functions">When to call ImGui functions</a></h3>
<p>The ImGui implementation adds a new script callback <code>imgui_on_render</code>.
It has a single argument i.e. <code>function imgui_on_render(name)</code> which tells you the name of the UI that is being rendered at the moment.</p>
<p>The engine currently sends callbacks for rendering <code>Main</code>, <code>MenuBar</code> and <code>MenuFile</code> but you can also call the callback yourself with a custom name to allow other scripts to append to your menus or windows.</p>
<h4 id="main"><a class="header" href="#main">Main</a></h4>
<p>The main ImGui render, this is where you want to draw your windows.</p>
<h4 id="menubar"><a class="header" href="#menubar">MenuBar</a></h4>
<p>You can also add your own menus to the menu bar at the top of the screen like this:</p>
<pre><code class="language-lua">function imgui_on_render(name)
	
	if name == "Main" then
	
	[...]
	
	elseif name == "MenuBar" then
		
		if ImGui.BeginMenu("My Menu") then
			clicked, my_window_visible = ImGui.MenuItem("My Cool Window", nil, my_window_visible, true)
			SendScriptCallback("imgui_on_render", "MyMenu")
			ImGui.EndMenu()
		end
	end
end
</code></pre>
<p><img src="assets/images/imgui-menubar-example.png" alt="ImGui Menu Bar" /></p>
<h4 id="menufile"><a class="header" href="#menufile">MenuFile</a></h4>
<p>The <code>File</code> menu is the very first menu that shows up on the menu bar.<br />
You can also append your menu items to this menu.</p>
<pre><code class="language-lua">function imgui_on_render(name)
	
	[...]
	
	elseif name == "MenuFile" then
		_, my_window_visible = ImGui.MenuItem("My Cool Window", nil, my_window_visible, true)
	end
end
</code></pre>
<p><img src="assets/images/imgui-menufile-example.png" alt="ImGui Menu File" /></p>
<h4 id="any-time-actually"><a class="header" href="#any-time-actually">Any time, actually</a></h4>
<p>In reality, you can draw ImGui UI whenever you want.<br />
If you wanted to make a debug overlay that’s visible at all times, even without opening the ImGui overlay, just render your window inside a new function and use <code>AddUniqueCall</code> to have it run once per frame.</p>
<pre><code class="language-lua">function window_overlay()

	expanded, _ = ImGui.Begin("My Overlay", true)
			
	if expanded then
		
		ImGui.Text("This is visible all the time!")
		
	end
	
	ImGui.End()
end

AddUniqueCall(window_overlay)
</code></pre>
<p><img src="assets/images/imgui-overlay-example.png" alt="ImGui Overlay" /></p>
<hr />
<h2 id="other-ui-elements"><a class="header" href="#other-ui-elements">Other UI elements</a></h2>
<p>Some more examples.</p>
<h3 id="buttons"><a class="header" href="#buttons">Buttons</a></h3>
<pre><code class="language-lua">if ImGui.Button("Do Something", vector2():set(80,22)) then do_something() end
</code></pre>
<p><img src="assets/images/imgui-button-example.png" alt="ImGui Button" /></p>
<h3 id="draggables"><a class="header" href="#draggables">Draggables</a></h3>
<pre><code class="language-lua">local test_value = 1
local test_vec = vector():set(0,0,0)

[...]

changed, test_value = ImGui.DragFloat("Test", test_value, 0.01, 0, 10)
if changed then [...] end

changed, test_vec = ImGui.DragFloat3("TestVec", test_vec, 1, -100, 100)
if changed then [...] end
</code></pre>
<p><img src="assets/images/imgui-draggable-example.png" alt="ImGui Draggables" /></p>
<h3 id="color-picker"><a class="header" href="#color-picker">Color Picker</a></h3>
<pre><code class="language-lua">local my_color = fcolor():set(0.75,0,0.25,1)

[...]

changed, my_color = ImGui.ColorPicker4("Light Color", my_color)
if changed then test_light.color = my_color end
</code></pre>
<p><img src="assets/images/imgui-colorpicker-example.png" alt="ImGui Color Picker" /></p>
<h3 id="text-input"><a class="header" href="#text-input">Text Input</a></h3>
<pre><code class="language-lua">local multiline_text = "input text here, пожалуйста"

[...]

multiline_text, changed = ImGui.InputTextMultiline("##Multiline", multiline_text, 500, vector2():set(250,200))
if changed then
	printf("newtext: %s", multiline_text)
end
</code></pre>
<p><img src="assets/images/imgui-textinput-example.png" alt="ImGui Text Input" /></p>
<h3 id="tree-nodes"><a class="header" href="#tree-nodes">Tree Nodes</a></h3>
<pre><code class="language-lua">if ImGui.TreeNode("Node Label") then
	
	ImGui.Text("Text inside node")
	
	ImGui.TreePop()
end
</code></pre>
<p><img src="assets/images/imgui-treenode-example.png" alt="ImGui TreeNodes" /></p>
<h3 id="combo-box"><a class="header" href="#combo-box">Combo Box</a></h3>
<pre><code class="language-lua">local selectables = {

	[1] = "test1",
	[2] = "test2",
	[3] = "test3",

}

local selected = 1

[...]

if ImGui.BeginCombo("Test Combo", selectables[selected]) then
	for i = 1, #selectables do
		if (ImGui.Selectable(selectables[i], i == selected, 0, vector2():set(100, 15))) then
			printf("Selected %s", selectables[i])
			selected = i
		end
	end
	ImGui.EndCombo()
end
</code></pre>
<p><img src="assets/images/imgui-combobox-example.png" alt="ImGui Combobox" /></p>
<hr />
<h2 id="fonts"><a class="header" href="#fonts">Fonts</a></h2>
<p>You can add custom fonts by putting <code>.ttf</code> or <code>.otf</code> files into <code>gamedata\textures\fonts</code><br />
Optionally, font configurations can be changed by adding a <code>.ltx</code> file with the same name into the fonts folder</p>
<p>Example font configuration to change the font size (fonts use <code>sizepixels = 16</code> by default)</p>
<pre><code class="language-ini">[font]
sizepixels = 19
</code></pre>
<p>If you want to adjust the built-in font, create a font config with the name <code>$default.ltx</code><br />
Or you could even replace the built-in font with a new one by adding a <code>$default.ttf</code> or <code>$default.otf</code> into the fonts folder.</p>
<h3 id="using-different-fonts"><a class="header" href="#using-different-fonts">Using different fonts</a></h3>
<p>To use the font in your ImGui window, you’ll have to tell ImGui which font to use</p>
<pre><code class="language-lua">ImGui.PushFont("Blackcraft")
ImGui.TextColored(fcolor():set(1,0,0.25,1), "Gobocore")
ImGui.PopFont()
</code></pre>
<p><img src="assets/images/imgui-font-example.png" alt="ImGui Fonts" /></p>
<p>Make sure to use <code>PopFont</code> once you’re done, this will make ImGui return to the default font</p>
<h3 id="icons"><a class="header" href="#icons">Icons</a></h3>
<p>The default font also supports icons to enhance the look of your UIs</p>
<pre><code class="language-lua">ImGui.BeginMenu(ImGui_Icon.WRENCH.." Hud Adjust")
</code></pre>
<p><img src="assets/images/imgui-icons-example.png" alt="ImGui Icons" /></p>
<p>Check <code>imgui_helper.script</code> for a full list of icons!</p>
<hr />
<h2 id="styles-and-colors"><a class="header" href="#styles-and-colors">Styles and colors</a></h2>
<p>Tweak ImGui styles and colors to your liking</p>
<pre><code class="language-lua">ImGui.PushStyleColor(ImGuiCol.WindowBg, fcolor():set(0.04, 0.00, 0.05, 0.82))
ImGui.PushStyleColor(ImGuiCol.FrameBg, fcolor():set(0.48, 0.16, 0.43, 0.54))
ImGui.PushStyleColor(ImGuiCol.PopupBg, fcolor():set(0.61, 0.12, 0.41, 0.60))

ImGui.PushStyleVar(ImGuiStyleVar.WindowBorderSize, 0)
ImGui.PushStyleVar(ImGuiStyleVar.WindowPadding, vector2():set(20,20))

[draw your UI]

ImGui.PopStyleColor(3)
ImGui.PopStyleVar(2)
</code></pre>
<h4 id="gobo-bo"><a class="header" href="#gobo-bo">Gobo-bo!</a></h4>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../tutorials/scripting/script-attachments.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../tutorials/models/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../tutorials/scripting/script-attachments.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../tutorials/models/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/js/tables.js"></script>
        <script src="../../theme/js/mermaid.min.js"></script>
        <script src="../../theme/js/mermaid-init.js"></script>
        <script src="../../theme/js/whichlang.js"></script>


    </div>
    </body>
</html>
